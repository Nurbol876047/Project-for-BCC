# Анализатор банковских продуктов

Система для анализа транзакций клиентов и определения оптимальных банковских продуктов на основе их поведения.

## Описание

Проект загружает данные транзакций из папки `project444/`, очищает их и определяет лучший банковский продукт для каждого клиента на основе анализа их финансового поведения.

## Банковские продукты

### 1. Карта для путешествий
**Сигналы:**
- Траты на такси, отели, путешествия
- Расходы в валюте (USD/EUR)
- Операции fx_buy/fx_sell

**TOV:** "Карта для путешествий с кэшбэком до 5% на отели и такси"

### 2. Премиальная карта
**Сигналы:**
- Высокий баланс (>100,000 руб)
- Траты в ресторанах
- Покупки косметики и ювелирных изделий

**TOV:** "Премиальная карта с эксклюзивными привилегиями"

### 3. Кредитная карта
**Сигналы:**
- Выраженные топ-категории трат
- Активное использование онлайн-сервисов

**TOV:** "Кредитная карта с льготным периодом до 55 дней"

### 4. Обмен валют
**Сигналы:**
- Операции fx_buy/fx_sell
- Траты в USD/EUR

**TOV:** "Выгодный обмен валют без комиссии"

### 5. Депозиты
**Сигналы:**
- Свободные средства (>50,000 руб)
- Стабильный остаток

**TOV:** "Накопительный счет с доходностью до 8% годовых"

### 6. Инвестиции
**Сигналы:**
- Свободные деньги (>100,000 руб)
- Интерес к сбережениям

**TOV:** "Инвестиционный портфель с доходностью до 12%"

### 7. Кредит наличными
**Сигналы:**
- Регулярные займы
- Расходы значительно превышают доходы

**TOV:** "Кредит наличными под 15.9% годовых"

## Структура проекта

```
core/
├── bank_product_analyzer.py    # Основной анализатор
├── generate_sample_data.py     # Генератор тестовых данных
├── requirements.txt            # Зависимости Python
├── project444/                 # Папка с исходными данными
│   ├── transactions.csv        # Транзакции клиентов
│   └── clients.csv            # Информация о клиентах
├── output/                     # Результаты анализа
│   └── result.csv             # Итоговые рекомендации
└── README.md                  # Документация
```

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Сгенерируйте тестовые данные (если нужно):
```bash
python3 generate_sample_data.py
```

3. Запустите анализ:
```bash
python3 bank_product_analyzer.py
```

## Формат входных данных

### transactions.csv
- `client_id` - ID клиента
- `transaction_date` - Дата транзакции
- `amount` - Сумма (отрицательная для расходов)
- `category` - Категория транзакции
- `description` - Описание транзакции
- `balance` - Баланс после транзакции
- `merchant` - Мерчант
- `type` - Тип транзакции (debit/credit)

### clients.csv
- `client_id` - ID клиента
- `avg_balance` - Средний баланс
- `total_spending` - Общие траты
- `total_transactions` - Количество транзакций
- `registration_date` - Дата регистрации

## Формат выходных данных

### result.csv
- `client_id` - ID клиента
- `best_product` - Рекомендуемый продукт
- `push_notification` - Персонализированное уведомление
- `total_transactions` - Количество транзакций
- `avg_balance` - Средний баланс
- `total_spending` - Общие траты
- `currency_operations` - Валютные операции
- `online_services` - Онлайн-сервисы
- `outflows_vs_inflows` - Соотношение расходов к доходам

## Результаты анализа

Система успешно обработала 50 клиентов и сгенерировала персонализированные рекомендации:

- **Карта для путешествий**: 45 клиентов (90%)
- **Премиальная карта**: 5 клиентов (10%)

Каждый клиент получил персонализированное пуш-уведомление в соответствии с TOV правилами.

## Особенности реализации

1. **Очистка данных**: Автоматическое приведение дат, сумм и категорий к корректному формату
2. **Алгоритм скоринга**: Система баллов для определения лучшего продукта
3. **Персонализация**: Учет индивидуальных особенностей клиента в уведомлениях
4. **Масштабируемость**: Легко добавлять новые продукты и правила

## Расширение функциональности

Для добавления новых банковских продуктов:

1. Добавьте правила в `product_rules`
2. Добавьте TOV в `tov_rules`
3. Обновите логику скоринга в `determine_best_product`
4. Добавьте персонализацию в `generate_push_notification`
